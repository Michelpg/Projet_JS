<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kapitalisme</title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="page.css">
</head>

<body>
  <button onclick="redirigerVersIndex()">Menu</button>

  <div class="top-bar">
    <h1 class="title">Kapitalisme</h1>
    <p class="description">Testez vos connaissances sur les capitales du monde !</p>
  </div>

  <div class="world-map">
    <!-- Contenu de la carte du monde -->
  </div>

  <div class="instructions">
    <select id="selectDifficulty">
      <option value="anyDifficulty">Toute difficulté</option>
      <option value="easy">Facile</option>
      <option value="medium">Moyen</option>
      <option value="hard">Difficile</option>
    </select>
    <select id="selectTheme">
      <option value="anyTheme">Tout thème</option>
      <option value="geography">Géographie</option>
      <option value="history">Histoire</option>
      <option value="science">Science</option>
    </select>
    <button onclick="commencerQuiz()">Quiz</button>
    <button onclick="commencerQuizCommunaute()">Quiz de la communauté</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.min.js"></script>
  <script>
    const themes = {
      "anyTheme" : "",
      "geography": 1,
      "history": 2,
      "science": 3
    };

    function commencerQuiz() {
      const selectDifficulty = document.getElementById('selectDifficulty').value;
      const selectTheme = document.getElementById('selectTheme').value;
      const themeCode = themes[selectTheme]; // Récupérer le code associé au thème

      console.log("Difficulté sélectionnée :", selectDifficulty);
      console.log("Thème sélectionné :", selectTheme, "Code :", themeCode);

      // Rediriger vers la page du quiz avec les paramètres sélectionnés
      window.location.href = "quiz.html?difficulty=" + selectDifficulty + "&theme=" + themeCode;
    }

    function commencerQuizCommunaute() {
      // Rediriger vers la page du quiz de la communauté
      window.location.href = "community_quiz.html";
    }

    function redirigerVersIndex() {
      window.location.href = "index.html";
    }

    // Vérifier la présence du cookie de connexion automatique
    const loggedIn = Cookies.get('loggedInUser');

    // Si l'utilisateur n'est pas connecté automatiquement, afficher les boutons de connexion et d'inscription
    if (loggedIn) {
      const createButton = document.createElement('button');
      createButton.textContent = "Créer un quiz";
      createButton.addEventListener('click', redirigerVersPageCreation);
      document.querySelector('.top-bar').appendChild(createButton);
    }

    const quizAPI = document.createElement('button');
    quizAPI.textContent = "Quiz aléatoire";
    quizAPI.addEventListener('click', commencerJeu);
    document.querySelector('.top-bar').appendChild(quizAPI);

    document.querySelector('.top-bar').appendChild(document.createTextNode(' '));

    const quizCommuButton = document.createElement('button');
    quizCommuButton.textContent = "Quiz de la communauté";
    quizCommuButton.addEventListener('click', redirigerVersPageQuiz);
    document.querySelector('.top-bar').appendChild(quizCommuButton);
  </script>
</body>

</html>
